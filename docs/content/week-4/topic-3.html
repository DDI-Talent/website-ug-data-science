<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Topic 3: Roundup and recap – Data Science for Health and Biomedical Sciences</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-c8db1e2376186e53c21d3da13e85f734.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">



</head>

<body class="nav-sidebar docked nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Data Science for Health and Biomedical Sciences</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-course-information" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Course Information</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-course-information">    
        <li>
    <a class="dropdown-item" href="../../course-information/welcome.html">
 <span class="dropdown-text">Welcome and Learning Outcomes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../course-information/index.html">
 <span class="dropdown-text">Course Information</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../course-information/timetable.html">
 <span class="dropdown-text">Timetable</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../course-information/library-resources.html">
 <span class="dropdown-text">Library Resources</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../course-information/course-contacts.html">
 <span class="dropdown-text">Course Contacts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../course-information/gen-ai-guidance.html">
 <span class="dropdown-text">Gen AI Guidance</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../course-information/help-and-support.html">
 <span class="dropdown-text">Help and Support</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href="../../content/index.html" aria-current="page"> 
<span class="menu-text">Content</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assessment/index.html"> 
<span class="menu-text">Assessment</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/week-4/index.html">Week 4: Analysing and Presenting Data in R</a></li><li class="breadcrumb-item"><a href="../../content/week-4/topic-3.html">Topic 3: Roundup and recap</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Content</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readings, videos and exercises</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 1: Introduction</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: Introduction to Health Data Science</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: The Role of Ethics in Health and Social Care</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/topic-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 3: Getting started with R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/topic-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 4: Types of Health Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/topic-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 5: Guide to R Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/topic-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 6: Troubleshooting and Error Messages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/further-resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Further Optional Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-1/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 2: Data Tidying and Wrangling</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: The Tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: Importing Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/topic-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 3: Exploring Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/topic-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 4: Ethical Dilemmas in Health Care Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/topic-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 5: Files and Folders</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 3: Data Visualisation and Storytelling</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: Data Visualisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: Data visualisation aims</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/topic-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 3: Data Storytelling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/topic-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 4: Plotting data with ggplot2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/topic-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 5: Going Further with R Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/topic-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 6: More Wrangling and Plotting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-3/topic-7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 7: Introduction to GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-2/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Week 4: Analysing and Presenting Data in R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-4/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-4/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: Wrangling factors and joins</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-4/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: Fine-tuning plots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-4/topic-3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Topic 3: Roundup and recap</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-4/data-engagements-and-controversies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optional: Data Engagements &amp; Data Controversies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-4/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 5: Making Maps and Tables in R</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-5/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-5/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: Introduction to Geospatial Data in R with sf and Tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-5/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: Creating more exciting tables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-5/writing-functions-in-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optional: Writing Functions in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-5/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-5/writing-functions-in-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optional: Writing Functions in R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 6: Machine Learning &amp; Analysing Clinical Text</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-6/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-6/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: Machine Learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-6/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: Analysing Clinical Text</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-6/topic-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 3: Embedding Ethics into Data Sharing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-6/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 7: Improving Healthcare Processes &amp; Integrating Health Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-7/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-7/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: Computational Methods for Improving Healthcare Processes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-7/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: Integrating Health Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-7/topic-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 3: Improving Healthcare Processes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-7/optional-nhs-r-modelling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TBC: Optional: NHS R - modelling hospital flow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-7/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 8: Data and Identity</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-8/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-8/readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data and Identity - readings</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-8/guest-lecture-slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guest lecture slides</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 9: Data Ownership</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-9/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-9/readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading: COVID and cause of death</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-9/visibility-of-what-slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visibility of What?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-9/guest-lecture-slides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Guest lecture slides</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 10: Working with Genomic Data</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-10/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-10/topic-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 1: Genomic data: What is it and how to analyse it</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-10/topic-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 2: Genotyping, sequencing, and profiling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-10/topic-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 3: Genome-wide association studies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-10/topic-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Topic 4:GWAS Resources</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/week-10/tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial materials</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#reproducibility-in-r" id="toc-reproducibility-in-r" class="nav-link active" data-scroll-target="#reproducibility-in-r">Reproducibility in R</a>
  <ul class="collapse">
  <li><a href="#reporting-with-r-markdown" id="toc-reporting-with-r-markdown" class="nav-link" data-scroll-target="#reporting-with-r-markdown">Reporting with R Markdown</a></li>
  <li><a href="#function-recap" id="toc-function-recap" class="nav-link" data-scroll-target="#function-recap">Function recap</a></li>
  </ul></li>
  <li><a href="#plotting-and-tables-recap" id="toc-plotting-and-tables-recap" class="nav-link" data-scroll-target="#plotting-and-tables-recap">Plotting and tables recap</a></li>
  <li><a href="#making-tables" id="toc-making-tables" class="nav-link" data-scroll-target="#making-tables">Making Tables</a>
  <ul class="collapse">
  <li><a href="#step-1-wrangle-data-for-the-table" id="toc-step-1-wrangle-data-for-the-table" class="nav-link" data-scroll-target="#step-1-wrangle-data-for-the-table"><strong>Step 1: Wrangle data for the table</strong></a></li>
  <li><a href="#step-2-create-the-kable-table-object" id="toc-step-2-create-the-kable-table-object" class="nav-link" data-scroll-target="#step-2-create-the-kable-table-object"><strong>Step 2: Create the kable table object</strong></a></li>
  <li><a href="#step-3-format-the-table-for-presentation" id="toc-step-3-format-the-table-for-presentation" class="nav-link" data-scroll-target="#step-3-format-the-table-for-presentation"><strong>Step 3: Format the table for presentation</strong></a></li>
  </ul></li>
  <li><a href="#combined-example" id="toc-combined-example" class="nav-link" data-scroll-target="#combined-example">Combined Example</a></li>
  <li><a href="#optional-data-engagement-data-controversies" id="toc-optional-data-engagement-data-controversies" class="nav-link" data-scroll-target="#optional-data-engagement-data-controversies">Optional: Data Engagement &amp; Data Controversies</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/week-4/index.html">Week 4: Analysing and Presenting Data in R</a></li><li class="breadcrumb-item"><a href="../../content/week-4/topic-3.html">Topic 3: Roundup and recap</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Topic 3: Roundup and recap</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="reproducibility-in-r" class="level2">
<h2 class="anchored" data-anchor-id="reproducibility-in-r">Reproducibility in R</h2>
<p>At the beginning of this course we introduced R by highlighting one of its main attractions: reproducibility. And here we are at the end of the course still banging on about reproducibility, but that’s because it is so important.</p>
<p>There is a growing awareness of the importance of reproducibility in data processing and analysis, and thankfully the tools needed to generate reproducible outputs are more accessible than ever before, helping to make this easier to accomplish.</p>
<p>There are many ways in which you can ensure your work is reproducible. The first we would recommend, is to start using R, and the second is to become familiar with R Markdown, so you are well on your way!</p>
<p>Here is a reminder of some of the main points to bear in mind, to ensure your future self and others can easily and efficiently build on the analysis you have carried out in R:</p>
<ul>
<li><p>always create an RStudio <strong>Project</strong> to work in</p></li>
<li><p>use <strong>raw data</strong> directly in R (no pre-editing with other software)</p></li>
<li><p>include informative <strong>commenting</strong></p></li>
<li><p>ensure code is <strong>easy to read</strong> with appropriate indentations and spacing</p></li>
<li><p>pipe %&gt;% with the <strong>Tidyverse</strong></p></li>
<li><p>give your objects <strong>meaningful names</strong></p></li>
<li><p>work in <strong>R Markdown</strong> for reporting</p></li>
</ul>
<p>Let’s look at these aspects in little more detail.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/week4.3.rproj.PNG.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="222"></p>
</figure>
</div>
<p>By now you should be familiar with the how and the why of creating <strong>Projects</strong> in RStudio as this has cropped up frequently throughout the course. Projects help to keep everything in one place, they help R to find all your files and folders easily, and they generally make your life a lot easier so you should definitely be using them.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/week4.3.rawdata.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>Always use the <strong>raw data</strong>. If your data has come from a database or from a publicly updated data source, avoid the temptation of doing some quick and dirty data wrangling in Excel before importing into R. This would make your analysis less reproducible as you may not always remember exactly what steps you took during this initial phase and these steps would then need to be taken each time you wanted to repeat or carry out a similar operation.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/week4.3.hash.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>Code which is easy to decipher and understand can be revisited in the future and rerun more easily, but how many times have you looked back at scribbled notes you took in haste, or code you typed quickly, with no recollection of what it all means? By including informative <strong>commenting</strong> you can help your future self, or anyone else who might be looking at your code, understand what it is you were trying to do at each point in your script. It isn’t needed for all lines of code but should be used when there might be ambiguity, or to provide clarification, or remind yourself about something specific to do with what’s happening. The keyboard shortcut for commenting/uncommenting a line is <strong>Ctrl+Shift+C</strong>, or you can manually type # .</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/easyread.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" width="271"></p>
</figure>
</div>
<p>On a similar theme, it is important to make your code <strong>easy to read</strong> by applying the appropriate indentations and spacing. The keyboard shortcut for quickly reformatting your code is <strong>Ctrl+I</strong> (first select your code, or use Ctrl+A to select all before doing Ctrl+I). If your script is long this is particularly important as it means you, or someone else, can scan the document more easily to find the relevant text or information.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/week4.3.tidyverse.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="271"></p>
</figure>
</div>
<p>The <strong>Tidyverse</strong> has featured heavily in this course and is another great way to make your code easier to read and understand due to the use of the %&gt;% operator. As we learned at the beginning of the course, the %&gt;% reduces the need for nested functions, where each function is “nested” inside another making it potentially very difficult to debug. Instead the piped ( %&gt;% ) functions appear almost like a series of statements or instructions, which can be run line by line if needed. At the start of every R script or document, remember to include library(tidyverse) .</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/week4.3.headscratch.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" width="145"></p>
</figure>
</div>
<p>To finish, just a final note about assigning your objects <strong>meaningful names</strong>. This is easily overlooked and can be surprisingly difficult but when given careful consideration, good object naming can make your life a lot easier, and again, make the code easier to understand and read. Avoid generic names such as data or plot as these can cause problems. This is particularly true if you are carrying out multiple analyses and have referred to “data” or “plot” somewhere else and not cleared your environment (Restart R often!). Also, when choosing names, no spaces or funky characters, stick to lowercase with underscores. Then be consistent, and you should be safe!</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/week4.3.rmarkdown.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="201"></p>
</figure>
</div>
<p>R Markdown is one of the keys to producing reproducible analysis in R as it enables the code and the narrative to be easily combined, whilst providing great flexibility as to how the output might be displayed. It is certainly worth the effort becoming familiar with R Markdown which was covered in detail in Week 6: Topics 1 &amp; 2. Creating a new R Markdown document is as simple as going to File - New File - R Markdown - OK then delete everything up to the first code chunk (it is useful to leave the first setup chunk) and you are ready to go!</p>
<section id="reporting-with-r-markdown" class="level3">
<h3 class="anchored" data-anchor-id="reporting-with-r-markdown">Reporting with R Markdown</h3>
<p>R Markdown is not only a powerful tool for ensuring reproducibility, but as you have already discovered, it includes many features which make it easy to create and share clear and professional looking documents for a wide range of audiences.</p>
<p>Here are some things to remember when planning and designing a report with R Markdown:</p>
<ul>
<li><p>provide a clear <strong>structure</strong> using Markdown section headers (#, ##, ###)</p></li>
<li><p>be conscious of the <strong>YAML</strong>, unlike R code, the YAML is very sensitive of extra spaces/formatting</p></li>
<li><p>consider the <strong>code output</strong> options depending on audience (`echo = TRUE` vs `echo = FALSE`)</p></li>
<li><p>think about the <strong>story</strong> you are trying to tell</p></li>
<li><p>make good use of <strong>figures</strong></p></li>
<li><p>use <strong>tables</strong> appropriately</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-70B75AA2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="487"></p>
</figure>
</div>
<p>It is important to provide a clear <strong>structure</strong> in any report or document you are writing and R Markdown makes it easy to manage and display the structure through the use of headers. The hash symbol ( # ) is used in the Markdown sections (all the bits which aren’t code chunks or YAML) to indicate different levels of header, so how big or small the text should be. These headers also show up in the document outline which is extremely useful as a means of navigating your document when editing, helping to save you time.</p>
<p>The <strong>structure</strong> of your R code chunks is important too. For example, it is good practice to have a code chunk near the top of your document (often in the setup chunk) where you keep all the packages that you are using together. It might look something like the image on the right. The next code chunk is often where you might choose to load your data and is likely to include the code similar to: mydata &lt;- read_csv(here(“data”, “appointments.csv”))</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-7B81FE24.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>We’ve already mentioned that Markdown headers ( # ) make it easy to define a clear structure in your R Markdown document. Explore some of the other <strong>Markdown features</strong>, such as <strong>**bold**</strong> and <em>*italic*</em> or `inline R code`, which can help to give your final document a high quality finish. Remember, you can access the <strong>Markdown Quick Reference</strong> guide from the Help menu.</p>
<p>In its most basic form, the <strong>YAML</strong> which appears at the top of your R Markdown document, could simply tell R Markdown what output format you would like your document to be in, in which case it would look like this, indicating HTML output:</p>
<pre><code>---
output: html_document
---</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-40587EA3.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="271"></p>
</figure>
</div>
<p>However, you have the potential to add many attractive features via the <strong>YAML</strong>, such as table of contents, section numbering, themes, and much more. You have to be particularly careful about indentation in the YAML (unlike in R code chunks where indentation is mainly for readability) but you can start exploring YAML options easily through changing settings in the document cog and this will automatically update your YAML.</p>
<p>Depending on who your intended audience is, you have a number of output options available to you. You can choose whether or not to <strong>show or run your code</strong> in the final document. Showing you code in the Markdown output document (HTML, Word, PDF) is denoted `echo = TRUE`, not showing it is denoted `echo = FALSE`. You also have control over whether to display the output of each code chunk or not too. These options can be accessed from the individual code chunk cogs or can be set for the whole document in the setup chunk.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/paste-3FCC498F.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="500"></p>
</figure>
</div>
<p>When creating a report or document, think about what <strong>story</strong> you are trying to tell with the data; you might be answering a specific question or perhaps highlighting a change in activity over a period of time. R Markdown makes it easy to intersperse clear and informative visual elements throughout the narrative. These could be in the form of figures and plots, nicely formatted tables or even images (e.g.&nbsp;JPG or PNG).</p>
<p>When writing the code to produce a <strong>plot</strong>, remember you don’t need to assign it to an object. For example, running myplot &lt;- mydata %&gt;% ggplot() will result in no plot appearing in your final document, it is saved in the Environment. Instead you can simply write mydata %&gt;% ggplot() which will ensure your plot does appear. You can also control the size of your plots and figures in the code chunk settings cog.</p>
<p>When writing the code for a <strong>table</strong> which you want to include in your final document, remember that the function kable() in the knitr package helps provide consistent table formatting across various different outputs. Also note that the same principles apply concerning whether or not your table output will appear as those referred to in plotting; no need to save the table first, you can simply write mydata %&gt;% kable() .</p>
<p>And finally, as addictive as it is creating beautiful plots with ggplot2, try not to bombard the reader with too many tables and figures. Choose wisely the information you would like to display in order to tell your story concisely and make good use of ggplot2’s ability to provide a breadth of information in one plot, through careful use of aesthetic mappings.</p>
</section>
<section id="function-recap" class="level3">
<h3 class="anchored" data-anchor-id="function-recap">Function recap</h3>
<p>In this course we have covered a whole variety of functions which you will find useful when carrying out data wrangling, plotting and analysis in R. There are however some functions which you will find yourself using more frequently than others and in the following sections we provide a quick recap on some of these more common functions.</p>
<p>The examples below are intended as a quick reference guide to remind yourself which functions to use in which settings. They can be copied and pasted straight into an R Markdown document as code chunk to test, but if you are copying multiple code chunks, you only need to include the packages once.</p>
<p><em>Note: The examples below all use the gapminder dataset which is loaded by running the command library(gapminder) . In your own projects you would load your data with the command read_csv(“mydata.csv”) or similar, depending on the format and location of your data.</em></p>
<section id="distinct" class="level4">
<h4 class="anchored" data-anchor-id="distinct"><strong><code>distinct()</code></strong></h4>
<p><strong>distinct() returns only distinct (unique) rows in a data frame</strong></p>
<p>In the example below we have included the variable continent so that we can explore how many unique categories there are in this column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'gapminder' was built under R version 4.4.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  continent
  &lt;fct&gt;    
1 Asia     
2 Europe   
3 Africa   
4 Americas 
5 Oceania  </code></pre>
</div>
</div>
<p>Useful for:</p>
<ul>
<li><p>exploring categories</p></li>
<li><p>spotting spelling mistakes</p></li>
<li><p>looking at date ranges</p></li>
<li><p>removing duplicate rows</p></li>
<li><p>Try this out:</p></li>
</ul>
<pre><code>gapminder %&gt;%
count(contintent)</code></pre>
</section>
<section id="filter" class="level4">
<h4 class="anchored" data-anchor-id="filter"><strong><code>filter()</code></strong></h4>
<p><strong>filter() returns a subset of rows based on a condition</strong></p>
<p>In the example below we have specified that we only want to see results where country is equal to Ghana .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Ghana"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 6
   country continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;   &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Ghana   Africa     1952    43.1  5581001      911.
 2 Ghana   Africa     1957    44.8  6391288     1044.
 3 Ghana   Africa     1962    46.5  7355248     1190.
 4 Ghana   Africa     1967    48.1  8490213     1126.
 5 Ghana   Africa     1972    49.9  9354120     1178.
 6 Ghana   Africa     1977    51.8 10538093      993.
 7 Ghana   Africa     1982    53.7 11400338      876.
 8 Ghana   Africa     1987    55.7 14168101      847.
 9 Ghana   Africa     1992    57.5 16278738      925.
10 Ghana   Africa     1997    58.6 18418288     1005.
11 Ghana   Africa     2002    58.5 20550751     1112.
12 Ghana   Africa     2007    60.0 22873338     1328.</code></pre>
</div>
</div>
<p>Useful for:</p>
<ul>
<li><p>filtering your data to remove unwanted rows</p></li>
<li><p>filtering your data as part of the exploratory phase</p></li>
<li><p>filtering your data prior to piping into ggplot()</p></li>
</ul>
<p>Remember:</p>
<ul>
<li><p>the “equal to” comparison operator needs double ==</p></li>
<li><p>to use inverted commas (““) for non-numbers</p></li>
</ul>
</section>
<section id="seselect" class="level4">
<h4 class="anchored" data-anchor-id="seselect"><strong><code>seselect()</code></strong></h4>
<p><strong>select() lets you choose which columns to select</strong></p>
<p>In the example below we have chosen to select only 4 variables from our dataset and we have also changed the order in which they appear.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, year, pop, lifeExp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 4
   country      year      pop lifeExp
   &lt;fct&gt;       &lt;int&gt;    &lt;int&gt;   &lt;dbl&gt;
 1 Afghanistan  1952  8425333    28.8
 2 Afghanistan  1957  9240934    30.3
 3 Afghanistan  1962 10267083    32.0
 4 Afghanistan  1967 11537966    34.0
 5 Afghanistan  1972 13079460    36.1
 6 Afghanistan  1977 14880372    38.4
 7 Afghanistan  1982 12881816    39.9
 8 Afghanistan  1987 13867957    40.8
 9 Afghanistan  1992 16317921    41.7
10 Afghanistan  1997 22227415    41.8
# ℹ 1,694 more rows</code></pre>
</div>
</div>
<p>Useful for:</p>
<ul>
<li><p>removing unwanted columns (e.g.&nbsp;columns with NAs, or things you’re just not going to use)</p></li>
<li><p>focusing on selected columns for further exploration</p></li>
<li><p>re-ordering columns for ease of viewing</p></li>
<li><p>select() can also be used to rename columns, e.g.</p></li>
</ul>
<pre><code>gapminder %&gt;% 
  select(country, year, population = pop, life_expectancy = lifeExp)</code></pre>
<ul>
<li>And select() has a sister function called rename(), that can be used to rename columns without removing the ones you don’t list, e.g.:</li>
</ul>
<pre><code>gapminder %&gt;%
  rename(population = pop, life_expectancy = lifeExp)</code></pre>
</section>
<section id="mutate" class="level4">
<h4 class="anchored" data-anchor-id="mutate"><strong><code>mutate()</code></strong></h4>
<p><strong>mutate() allows you to add a column or update an existing column</strong></p>
<p>In the example below we have created a new column called pop_millions so that we can display the population as a decimal number of millions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_millions =</span> pop<span class="sc">/</span><span class="dv">1000000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 7
   country     continent  year lifeExp      pop gdpPercap pop_millions
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;        &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.         8.43
 2 Afghanistan Asia       1957    30.3  9240934      821.         9.24
 3 Afghanistan Asia       1962    32.0 10267083      853.        10.3 
 4 Afghanistan Asia       1967    34.0 11537966      836.        11.5 
 5 Afghanistan Asia       1972    36.1 13079460      740.        13.1 
 6 Afghanistan Asia       1977    38.4 14880372      786.        14.9 
 7 Afghanistan Asia       1982    39.9 12881816      978.        12.9 
 8 Afghanistan Asia       1987    40.8 13867957      852.        13.9 
 9 Afghanistan Asia       1992    41.7 16317921      649.        16.3 
10 Afghanistan Asia       1997    41.8 22227415      635.        22.2 
# ℹ 1,694 more rows</code></pre>
</div>
</div>
<p>Useful for:</p>
<ul>
<li><p>adding an extra column containing a calculation</p></li>
<li><p>combining with group_by() for grouped calculations</p></li>
<li><p>updating a column which has mistakes</p></li>
<li><p>converting a column to a different data type</p></li>
</ul>
<p>Remember:</p>
<ul>
<li><p>your new column is always added at the end of your tibble (data frame)</p></li>
<li><p>the value to the left of the = is the new name for you column and could be called anything</p></li>
<li><p>if you want to replace a column, the value to the left of the = must be exactly the same name as the column to replace</p></li>
</ul>
</section>
<section id="summarise" class="level4">
<h4 class="anchored" data-anchor-id="summarise"><strong><code>summarise()</code></strong></h4>
<p><strong>summarise() returns a new tibble (data frame) containing summary statistics based on what has been specified in the function.</strong></p>
<p>In the example below the summarise function has calculated the average life expectancy for the whole gapminder dataset by averaging all observations (or rows). On its own, summarise() is not so useful, but when combined with group_by() its use becomes apparent, see later examples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_life_exp =</span> <span class="fu">mean</span>(lifeExp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  avg_life_exp
         &lt;dbl&gt;
1         59.5</code></pre>
</div>
</div>
<p>Useful for:</p>
<ul>
<li>combining with group_by() to perform grouped calculations</li>
</ul>
</section>
<section id="group_by" class="level4">
<h4 class="anchored" data-anchor-id="group_by"><strong><code>group_by()</code></strong></h4>
<p><strong>group_by() lets you choose how you want the variables in your dataset to be grouped so that you can perform operations (such as sum() or mean()) on these groups.</strong></p>
<p>In the example below we have grouped our data by the variable year. Notice that the output to this chunk of code looks no different to how it would look if we just ran gapminderwithout any grouping. This is because the effects of group_by() are only noticeable when we start performing operations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
# Groups:   year [12]
   country     continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
<p>In this next example we have combined group_by() with the summarise() command and now, instead of seeing an average life expectancy for the whole tibble (as in the example above), we see that life expectancy has been averaged within each year group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_life_exp =</span> <span class="fu">mean</span>(lifeExp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year avg_life_exp
   &lt;int&gt;        &lt;dbl&gt;
 1  1952         49.1
 2  1957         51.5
 3  1962         53.6
 4  1967         55.7
 5  1972         57.6
 6  1977         59.6
 7  1982         61.5
 8  1987         63.2
 9  1992         64.2
10  1997         65.0
11  2002         65.7
12  2007         67.0</code></pre>
</div>
</div>
<p>Useful for:</p>
<ul>
<li><p>combining with summarise()or mutate() for grouped calculations</p></li>
<li><p>preparing summary statistics for plotting</p></li>
<li><p>exploring values within groups in your data</p></li>
</ul>
<p>Remember:</p>
<ul>
<li><p>to use ungroup() if carrying out further data manipulations to avoid unexpected results, as by default, mutate() and summarise() silently retain the groupings.</p></li>
<li><p>the value to the left of the = is the new name for your column and could be called anything</p></li>
</ul>
</section>
<section id="left_join" class="level4">
<h4 class="anchored" data-anchor-id="left_join"><strong><code>left_join()</code></strong></h4>
<p><strong>left_join() allows you to combine two datasets</strong></p>
<p>In the example below we are joining the gapminder tibble to another tibble we can access directly from the gapminder package, the country_codes data frame, in order to add the ISO country codes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(country_codes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(country)`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 8
   country     continent  year lifeExp      pop gdpPercap iso_alpha iso_num
   &lt;chr&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779. AFG             4
 2 Afghanistan Asia       1957    30.3  9240934      821. AFG             4
 3 Afghanistan Asia       1962    32.0 10267083      853. AFG             4
 4 Afghanistan Asia       1967    34.0 11537966      836. AFG             4
 5 Afghanistan Asia       1972    36.1 13079460      740. AFG             4
 6 Afghanistan Asia       1977    38.4 14880372      786. AFG             4
 7 Afghanistan Asia       1982    39.9 12881816      978. AFG             4
 8 Afghanistan Asia       1987    40.8 13867957      852. AFG             4
 9 Afghanistan Asia       1992    41.7 16317921      649. AFG             4
10 Afghanistan Asia       1997    41.8 22227415      635. AFG             4
# ℹ 1,694 more rows</code></pre>
</div>
</div>
<p>Useful for:</p>
<ul>
<li><p>combining two sets of data which share an id (e.g.&nbsp;patient id, appointment id)</p></li>
<li><p>adding in information from a lookup table (e.g.&nbsp;country codes, Health Board names)</p></li>
</ul>
<p>Remember:</p>
<ul>
<li><p>to watch out what happens to missing values</p></li>
<li><p>to keep an eye on the number of observations in each tibble before and after joining</p></li>
<li><p>to check which columns are being joined by</p></li>
</ul>
<p>Other functions for wrangling data and what they might be useful for:</p>
<ul>
<li><p><code>arrange()</code> for sorting the values within a column</p></li>
<li><p><code>desc()</code> for indicating descending sort order when used within arrange()</p></li>
<li><p><code>str_replace()</code> for updating spelling mistakes in a column</p></li>
<li><p><code>paste()</code> for joining things together and adding new text</p></li>
<li><p><code>ymd()</code> for reading in dates in strange formats</p></li>
<li><p><code>factor()</code> for converting a variable to factor data type</p></li>
<li><p><code>fct_relevel()</code> for changing the order of factors</p></li>
<li><p><code>pivot_longer()</code> for reshaping your data if you have values in column headings</p></li>
<li><p><code>pivot_wider()</code> for reshaping your data if you have multiple variables in one column</p></li>
</ul>
</section>
</section>
</section>
<section id="plotting-and-tables-recap" class="level2">
<h2 class="anchored" data-anchor-id="plotting-and-tables-recap">Plotting and tables recap</h2>
<p>In the examples below we provide a recap on how to use ggplot2 to build up layers on a plot. Included are examples of argument options which you might want to experiment with in your own plots. I rarely remember any of the argument specifics and always fine-tune my plots by pressing `F1` on the various functions I’m using and exploring the documentation (F1, or fn+F1 on some computers opens up the Help tab). Then it’s a process of trial and error.</p>
<p>Comments are included before each new line or layer to describe what is happening.</p>
<section id="the-blank-canvas" class="level4">
<h4 class="anchored" data-anchor-id="the-blank-canvas"><strong>The blank canvas</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data we are sending to ggplot()</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># lets create a plot</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplot</span>(<span class="fu">aes</span>(    <span class="co"># specify the axes</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> year,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> lifeExp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-3_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Remember:</p>
<ul>
<li>that everything from now on needs + at end of line instead of %&gt;%</li>
</ul>
</section>
<section id="plot-type" class="level4">
<h4 class="anchored" data-anchor-id="plot-type"><strong>Plot type</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># specify type of plot: scatter with jitter</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># colour life expectancy based on values</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">colour =</span> lifeExp),</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set "alpha" making points same transparency</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.6</span>,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># specify width of "jitter"</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-3_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Remember:</p>
<ul>
<li><p>colour is specified <em>inside</em> the aes() function because we want it to be dependent on the values in the data</p></li>
<li><p>alpha and width are specified <em>outside</em> the aes() function because we want to specify a fixed value for these arguments</p></li>
</ul>
</section>
<section id="faceting" class="level4">
<h4 class="anchored" data-anchor-id="faceting"><strong>Faceting</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">colour =</span> lifeExp),</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.6</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create muti-panle plot</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># based on continent grouping</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-3_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Useful for:</p>
<ul>
<li>comparing values between different categories in your dataset</li>
</ul>
</section>
<section id="including-a-second-geom-e.g.-geom_boxplot" class="level4">
<h4 class="anchored" data-anchor-id="including-a-second-geom-e.g.-geom_boxplot"><strong>Including a second geom, e.g., geom_boxplot()</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">colour =</span> lifeExp),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.6</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># specify type of plot: boxplot</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># group by year (discrete) as currently "int" data type (continuous)</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">group =</span> year),</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set "alpha" so we can see jitter points underneath</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.3</span>,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove boxplot outliers as already present in "jitter" layer</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.shape =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-3_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Remember:</p>
<ul>
<li>Depending on whether your variable is stored as a “number” or a “character” or a “factor” will determine how ggplot2 deals with it</li>
</ul>
</section>
<section id="standard-themes" class="level4">
<h4 class="anchored" data-anchor-id="standard-themes"><strong>Standard themes</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> lifeExp)) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">colour =</span> lifeExp),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.6</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent) <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">group =</span> year),</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.3</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.shape =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># choose a standard theme: dark</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dark</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-3_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Useful for:</p>
<ul>
<li>quickly changing how your plot looks by applying one of the built in themes: theme_bw() , theme_classic() , theme_dark() etc.</li>
</ul>
</section>
</section>
<section id="making-tables" class="level2">
<h2 class="anchored" data-anchor-id="making-tables">Making Tables</h2>
<p>Tables are another important tool to have in your data analysis toolbox for communcating. As a general rule, when deciding between tables for graphs/plots:</p>
<ul>
<li><p>use <strong>tables</strong> when the display will be used to look up individual values or you want to compare individual values</p></li>
<li><p>use <strong>graphs</strong> when the display will be used to reveal relatonships among whole sets of values or between variables</p></li>
</ul>
<p>To make tables, we worked with the kable function and kableExtra package in R.</p>
<p>The general gt workflow includes 3 key steps:</p>
<ol type="1">
<li><p>wrangle your data for the table by either piping %&gt;% the data or creating a new data object (tabledata &lt;- data %&gt;% mutate(…))</p></li>
<li><p>pass the wrangled data to the kable function %&gt;% kable()</p></li>
<li><p>format the table object for presentation</p></li>
</ol>
<section id="step-1-wrangle-data-for-the-table" class="level3">
<h3 class="anchored" data-anchor-id="step-1-wrangle-data-for-the-table"><strong>Step 1: Wrangle data for the table</strong></h3>
<p>Lets say we are interested in average life expectancy in Africa, Asia, and Oceania in the years 1952, 1972, 1992, and 2002</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'kableExtra'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    group_rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>tabledata <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, continent) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_life_exp =</span> <span class="fu">mean</span>(lifeExp)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Africa"</span>, <span class="st">"Asia"</span>, <span class="st">"Oceania"</span>),</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1952</span>, <span class="dv">1972</span>, <span class="dv">1992</span>, <span class="dv">2002</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'year'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
</section>
<section id="step-2-create-the-kable-table-object" class="level3">
<h3 class="anchored" data-anchor-id="step-2-create-the-kable-table-object"><strong>Step 2: Create the kable table object</strong></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>tabledata <span class="sc">%&gt;%</span> <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">year</th>
<th style="text-align: left;">continent</th>
<th style="text-align: right;">avg_life_exp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1952</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: right;">39.13550</td>
</tr>
<tr class="even">
<td style="text-align: right;">1952</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">46.31439</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1952</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: right;">69.25500</td>
</tr>
<tr class="even">
<td style="text-align: right;">1972</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: right;">47.45094</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1972</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">57.31927</td>
</tr>
<tr class="even">
<td style="text-align: right;">1972</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: right;">71.91000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1992</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: right;">53.62958</td>
</tr>
<tr class="even">
<td style="text-align: right;">1992</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">66.53721</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1992</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: right;">76.94500</td>
</tr>
<tr class="even">
<td style="text-align: right;">2002</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: right;">53.32523</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2002</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">69.23388</td>
</tr>
<tr class="even">
<td style="text-align: right;">2002</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: right;">79.74000</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="step-3-format-the-table-for-presentation" class="level3">
<h3 class="anchored" data-anchor-id="step-3-format-the-table-for-presentation"><strong>Step 3: Format the table for presentation</strong></h3>
<p>How you decide to format and customise your table visually is a stylistic and personal choice. However, there are a few key principles to keep in mind:</p>
<ul>
<li><p>you should always change the name of your variables to be meaingful to stakeholders who are not familiar with your data - that is, do not keep column names the same as they are called in your dataset</p></li>
<li><p>generally, it is a good idea to have a title on each table</p></li>
<li><p>for reproducibility, it is a good idea to include the data source if you are using an openly available dataset</p></li>
<li><p>be consistent: use capital or lower case letters in a consistent way</p></li>
<li><p>format numbers in an interpretable way (generally speaking, you do not need to include more than 2 or 3 decimal places)</p></li>
</ul>
<p>Below is one way you could format the table for presentation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>tabledata <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Continent"</span>, <span class="st">"Average Life Expectancy"</span>),</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">align =</span> <span class="st">"clc"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Life Expectancy in Africa, Asia, and Oceania: Data from 1952, 1972, 1992, and 2002"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="st">"striped"</span>, <span class="at">full_width =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">footnote</span>(<span class="at">general =</span> <span class="st">"Data from the gapminder dataset"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped caption-top table-sm small" data-quarto-postprocess="true">
<caption>Life Expectancy in Africa, Asia, and Oceania: Data from 1952, 1972, 1992, and 2002</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Continent</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Average Life Expectancy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1952</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: center;">39.14</td>
</tr>
<tr class="even">
<td style="text-align: center;">1952</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: center;">46.31</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1952</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: center;">69.25</td>
</tr>
<tr class="even">
<td style="text-align: center;">1972</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: center;">47.45</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1972</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: center;">57.32</td>
</tr>
<tr class="even">
<td style="text-align: center;">1972</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: center;">71.91</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1992</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: center;">53.63</td>
</tr>
<tr class="even">
<td style="text-align: center;">1992</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: center;">66.54</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1992</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: center;">76.94</td>
</tr>
<tr class="even">
<td style="text-align: center;">2002</td>
<td style="text-align: left;">Africa</td>
<td style="text-align: center;">53.33</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2002</td>
<td style="text-align: left;">Asia</td>
<td style="text-align: center;">69.23</td>
</tr>
<tr class="even">
<td style="text-align: center;">2002</td>
<td style="text-align: left;">Oceania</td>
<td style="text-align: center;">79.74</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td style="text-align: center; padding: 0;"><span style="font-style: italic;">Note: </span></td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center; padding: 0;"><sup></sup> Data from the gapminder dataset</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
</tfoot>

</table>
</div>
</div>
</section>
</section>
<section id="combined-example" class="level2">
<h2 class="anchored" data-anchor-id="combined-example">Combined Example</h2>
<p>In <a href="../..\documents/week-4/Combined_example.Rmd">this example</a> you can see a simple R Markdown document without any narrative text added yet, just the YAML then a series of code chunks outlining the various stages in the data analysis process.</p>
<p>Which when knitted to a pdf document looks like this:</p>
<p>PDF!</p>
<p>The next step would be to add in narrative text, creating a comprehensive analysis.</p>
</section>
<section id="optional-data-engagement-data-controversies" class="level2">
<h2 class="anchored" data-anchor-id="optional-data-engagement-data-controversies">Optional: Data Engagement &amp; Data Controversies</h2>
<p>Critically review the arguments posed in this article:</p>
<p>Mittelstadt B (2019) <a href="https://doi.org/10.1038/s42256-019-0114-4">Principles alone cannot guarantee ethical AI</a>. Nat Mach Intell 1, 501–507.</p>
<hr>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ddi-talent\.github\.io\/website-ug-data-science\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>